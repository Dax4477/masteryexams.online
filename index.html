<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MASTERY EXAMS - Kerala PSC & Competitive Exam Simulator</title>
<meta name="description" content="Free Kerala PSC Mock Tests with Mastery Mode. Practice LDC, LGS, and Degree Level exams with instant results. Comprehensive study guides for competitive exams.">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1014556383468073" crossorigin="anonymous"></script>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Malayalam:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<script src="data.js"></script>

<style>
/* --- EASYPSC STYLE ROOTS --- */
:root {
    --body-font: 'Open Sans', 'Noto Serif Malayalam', sans-serif;
    --title-font: 'Open Sans', 'Noto Serif Malayalam', serif;
    --primary-color: #3280ff;
    --primary-hover: #0088ff;
    --text-dark: #000;
    --text-light: #666;
    --bg-light: #f4f4f4;
    --white: #ffffff;
    --border: #e0e0e0;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--body-font); background: var(--bg-light); color: var(--text-dark); font-size: 14px; line-height: 1.5; }
a { text-decoration: none; color: inherit; transition: 0.3s; }
a:hover { color: var(--primary-color); }
img { max-width: 100%; height: auto; }

/* --- LAYOUT --- */
.container { max-width: 1100px; margin: 0 auto; padding: 0 15px; position: relative; }
.main-wrapper { display: flex; gap: 20px; margin-top: 20px; }
#feed-view { width: 70%; }
#sidebar-container { width: 30%; }

/* --- TOP BAR & HEADER --- */
.top-bar { height: 40px; background: var(--primary-color); color: #fff; display: flex; align-items: center; }
.top-bar ul { list-style: none; display: flex; gap: 15px; }
.top-bar a { color: #fff; font-size: 12px; font-weight: 600; }

.header { background: var(--white); height: 70px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
.header-inner { display: flex; justify-content: space-between; align-items: center; height: 100%; }
.logo h1 { font-family: var(--title-font); font-size: 28px; font-weight: 800; color: #000; }
.logo span { color: var(--primary-color); }

.main-menu ul { list-style: none; display: flex; gap: 20px; }
.main-menu a { font-weight: 700; color: var(--primary-color); font-size: 14px; text-transform: uppercase; }

/* --- TICKER --- */
.ticker-wrap { background: #e9e9e9; border: 1px solid #ddd; margin: 15px 0; display: flex; align-items: center; height: 35px; }
.ticker-title { background: var(--primary-color); color: #fff; padding: 0 15px; height: 100%; display: flex; align-items: center; font-weight: 700; font-size: 12px; text-transform: uppercase; }
.ticker-content { flex: 1; overflow: hidden; padding-left: 10px; font-size: 13px; font-weight: 600; }

/* --- WIDGET BOXES (Jobiki Style) --- */
.jobiki-box { background: var(--white); border: 1px solid var(--border); border-radius: 5px; padding: 20px; margin-bottom: 20px; }
.widget-title { border-bottom: 2px solid var(--primary-color); margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
.widget-title h3 { font-size: 16px; color: var(--primary-color); font-weight: 700; text-transform: uppercase; margin: 0; padding-bottom: 10px; }
.widget-title h3:before { content: '\f02d'; font-family: 'Font Awesome 6 Free'; font-weight: 900; background: var(--primary-color); color: #fff; padding: 5px 8px; border-radius: 3px; margin-right: 10px; font-size: 12px; }

/* --- EXAM APP STYLES (Integrated) --- */
.app-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100%, 1fr)); gap: 15px; }

/* Booklet Card (Looks like a Post) */
.booklet-card { display: flex; border-bottom: 1px dashed #eee; padding-bottom: 15px; margin-bottom: 15px; cursor: pointer; }
.booklet-card:hover .entry-title { color: var(--primary-color); }
.booklet-thumb { width: 100px; height: 80px; background: #eee; border-radius: 5px; margin-right: 15px; display: flex; align-items: center; justify-content: center; font-size: 30px; color: #ccc; }
.booklet-info h2 { font-size: 16px; font-weight: 700; margin-bottom: 5px; line-height: 1.4; }
.booklet-meta { font-size: 12px; color: #999; margin-bottom: 8px; }
.start-btn { display: inline-block; background: #f1f1f1; padding: 4px 12px; font-size: 11px; border-radius: 20px; font-weight: 600; color: #333; }
.booklet-card:hover .start-btn { background: var(--primary-color); color: #fff; }

/* Level Grid */
.level-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px; }
.level-box { aspect-ratio: 1; display: flex; flex-col; align-items: center; justify-content: center; border: 2px solid #eee; border-radius: 8px; cursor: pointer; transition: 0.2s; font-weight: bold; background: #fff; }
.level-box.locked { background: #f9f9f9; color: #ccc; pointer-events: none; border-color: #f0f0f0; }
.level-box.active { border-color: var(--primary-color); color: var(--primary-color); background: #f0f8ff; box-shadow: 0 4px 6px rgba(50, 128, 255, 0.2); }
.level-box.passed { background: #e6fffa; border-color: #38b2ac; color: #38b2ac; }

/* Exam Interface */
.exam-container { background: #fff; }
.exam-header { display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
.progress-bar { height: 6px; background: #eee; border-radius: 3px; overflow: hidden; margin-bottom: 20px; }
.progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: 0.3s; }
.question-text { font-size: 18px; font-weight: 600; margin-bottom: 20px; line-height: 1.6; }
.option-btn { width: 100%; text-align: left; padding: 12px 15px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; background: #fff; cursor: pointer; transition: 0.2s; font-size: 14px; }
.option-btn:hover { background: #f9f9f9; border-color: #ccc; }
.option-btn.correct { background: #d1fae5; border-color: #34d399; color: #065f46; font-weight: bold; }
.option-btn.incorrect { background: #fee2e2; border-color: #f87171; color: #991b1b; }
.controls { display: flex; justify-content: space-between; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }

/* Sidebar Widgets */
.social-filter { overflow: hidden; list-style: none; display: flex; gap: 5px; flex-wrap: wrap; }
.social-filter li { flex: 1 1 45%; }
.social-filter a { display: block; height: 35px; line-height: 35px; text-align: center; color: #fff; border-radius: 4px; font-weight: 600; font-size: 13px; }
.social-filter .facebook { background: #3b5998; }
.social-filter .whatsapp { background: #25D366; }
.social-filter .telegram { background: #0088cc; }
.social-filter .youtube { background: #cd201f; }

.category-tags a { display: inline-block; background: #eee; padding: 5px 10px; border-radius: 3px; font-size: 12px; margin: 0 5px 5px 0; color: #555; }
.category-tags a:hover { background: var(--primary-color); color: #fff; }

/* SEO Content Area */
.seo-content { margin-top: 40px; border-top: 1px solid #eee; padding-top: 30px; }
.seo-content h2 { font-size: 22px; color: #333; margin-bottom: 15px; }
.seo-content h3 { font-size: 18px; color: #444; margin: 20px 0 10px; }
.seo-content p { margin-bottom: 15px; text-align: justify; color: #555; }

/* Footer */
footer { background: #090512; color: #aaa; padding: 40px 0; margin-top: 40px; }
.footer-cols { display: flex; gap: 30px; }
.footer-col { flex: 1; }
.footer-col h3 { color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
.footer-col ul { list-style: none; }
.footer-col li { border-bottom: 1px solid #222; padding: 8px 0; }
.copyright { background: #000; text-align: center; padding: 15px; color: #666; font-size: 12px; }

/* Mobile */
@media(max-width:768px) {
    .main-wrapper { flex-direction: column; }
    #feed-view, #sidebar-container { width: 100%; }
    .top-bar, .main-menu { display: none; }
    .footer-cols { flex-direction: column; }
}
</style>
</head>
<body>

<div class="top-bar">
    <div class="container">
        <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
        </ul>
        <ul style="margin-left: auto;">
            <li><a href="#"><i class="fab fa-facebook"></i></a></li>
            <li><a href="#"><i class="fab fa-whatsapp"></i></a></li>
            <li><a href="#"><i class="fab fa-telegram"></i></a></li>
        </ul>
    </div>
</div>

<header class="header">
    <div class="container header-inner">
        <div class="logo">
            <a href="index.html"><h1>MASTERY <span>EXAMS</span></h1></a>
        </div>
        <nav class="main-menu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="practice.html">Mock Test</a></li>
                <li><a href="blog.html">Study Notes</a></li>
                <li><a href="#">Career Guru</a></li>
            </ul>
        </nav>
        <div class="search-icon">
            <i class="fas fa-search" style="color:var(--primary-color); font-size:18px;"></i>
        </div>
    </div>
</header>

<div class="ticker-wrap">
    <div class="container" style="display:flex; width:100%;">
        <div class="ticker-title"><i class="fas fa-bolt"></i> &nbsp; Breaking</div>
        <div class="ticker-content">
            <marquee scrollamount="6">
                <a href="#">Kerala PSC LDC Notification 2025 Out</a> &nbsp;|&nbsp; 
                <a href="#">New RBI Grade B Mock Tests Added</a> &nbsp;|&nbsp; 
                <a href="#">Download SCERT Textbooks PDF</a> &nbsp;|&nbsp;
                <a href="#">Farmers Day Quiz Winners Announced</a>
            </marquee>
        </div>
    </div>
</div>

<div class="container main-wrapper">
    
    <main id="feed-view">

        <div id="view-booklets" class="jobiki-box">
            <div class="widget-title">
                <h3>Select Exam Category</h3>
                <a class="simple-viewmore" href="#">View All</a>
            </div>
            <div id="booklet-list-container">
                <div style="text-align:center; padding:20px;">Loading Exams...</div>
            </div>
        </div>

        <div id="view-levels" class="jobiki-box" style="display:none;">
            <div class="widget-title">
                <h3 id="level-page-title">Levels</h3>
                <a class="simple-viewmore" href="#" onclick="showBooklets()">Back</a>
            </div>
            <div class="level-grid" id="level-grid-container">
                </div>
        </div>

        <div id="view-exam" class="jobiki-box" style="display:none;">
            <div class="exam-header">
                <h3 id="exam-title-text" style="color:var(--text-dark);">Level 1</h3>
                <span id="score-text" style="color:var(--primary-color); font-weight:bold;">0/0</span>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            
            <div id="question-container">
                <div class="question-text" id="q-text">Loading Question...</div>
                <div id="options-container"></div>
            </div>

            <div class="controls">
                <button onclick="reportQuestion()" style="border:none; background:none; color:#999; cursor:pointer; font-size:12px;"><i class="fas fa-flag"></i> Report</button>
                <button id="next-btn" onclick="nextQuestion()" style="background:var(--primary-color); color:#fff; border:none; padding:8px 20px; border-radius:4px; cursor:pointer; display:none;">Next</button>
            </div>
        </div>

        <div id="view-result" class="jobiki-box" style="display:none; text-align:center; padding:40px;">
            <div style="font-size:50px; margin-bottom:10px;" id="result-icon">üèÜ</div>
            <h2 id="result-title">Level Cleared!</h2>
            <p id="result-msg" style="margin:10px 0 20px; color:#666;">You scored 100%. Great job!</p>
            <button onclick="backToLevels()" style="background:var(--primary-color); color:#fff; border:none; padding:10px 30px; border-radius:4px; cursor:pointer;">Continue</button>
        </div>

        <div style="background:#f0f0f0; height:250px; display:flex; align-items:center; justify-content:center; border:2px dashed #ddd; margin-bottom:20px; border-radius:5px; color:#999;">
            Google AdSense Space
        </div>

        <div class="jobiki-box seo-content">
            <h2>Kerala PSC & Competitive Exam Preparation Guide 2025</h2>
            
            <h3>Introduction to Mastery Exams</h3>
            <p>Welcome to Mastery Exams, your ultimate destination for comprehensive exam preparation. In the highly competitive landscape of government jobs in India, specifically for Kerala Public Service Commission (KPSC), SSC, and Railway exams, having a structured study plan is crucial. Our platform is designed to provide aspirants with a unique "Mastery Mode" of learning, where perfection is not just a goal, but a requirement to progress. This ensures that every concept is thoroughly understood and memorized.</p>

            <h3>Why "Mastery Mode" Works</h3>
            <p>Traditional mock tests often allow students to pass with 40% or 50% marks. While this mimics the exam pattern, it leaves huge gaps in knowledge. If you get 50% wrong, you are only half-prepared. Mastery Exams changes this paradigm. In our system, you must score 100% in a level to unlock the next one. This "Gamified Spaced Repetition" forces the brain to pay attention to details it would otherwise ignore. By repeating questions until you get them perfect, you move information from short-term memory to long-term retention.</p>

            <h3>Key Topics Covered for KPSC 2025</h3>
            <p><strong>1. Kerala Renaissance:</strong> A pivotal topic for all Kerala PSC exams. We cover the life and works of Sree Narayana Guru, Ayyankali, Chattampi Swamikal, V.T. Bhattathiripad, and others. Understanding the social reform movements like Vaikom Satyagraha and Guruvayur Satyagraha is essential for the Degree Level Prelims.</p>
            <p><strong>2. Indian Constitution:</strong> The backbone of Indian polity. Our modules break down the Preamble, Fundamental Rights (Articles 12-35), Directive Principles (DPSP), and Fundamental Duties. Special focus is given to recent amendments and landmark Supreme Court judgments that are frequently asked in LDC and LGS exams.</p>
            <p><strong>3. Current Affairs:</strong> The most dynamic section. We provide updates on National and International events, Sports (Olympics, Cricket, Football), Awards (Nobel, Oscar, Jnanpith), and Science & Technology (ISRO missions like Chandrayaan and Gaganyaan). Our "Filter Method" teaches you to ignore political noise and focus on exam-relevant facts.</p>
            <p><strong>4. General Science:</strong> Covering Physics, Chemistry, and Biology based on SCERT textbooks (Class 5 to 10). Topics include Human Anatomy, Vitamins, Diseases, Periodic Table, Motion, and Energy. This is often the tie-breaker section in LDC exams.</p>

            <h3>Strategies for Success</h3>
            <p>Success in competitive exams is 20% knowledge and 80% practice. 
            <br><strong>Time Management:</strong> Use our timed mock tests to improve your speed. In a real exam, you have less than a minute per question. 
            <br><strong>Negative Marking:</strong> Our 100% mastery rule trains you to be accurate. In real exams, guessing leads to negative marks. By forcing perfection here, we reduce your tendency to guess blindly.
            <br><strong>Consistency:</strong> Daily practice is better than weekly cramming. Use our platform for just 20 minutes a day to see significant improvement over a month.</p>

            <h3>Conclusion</h3>
            <p>MasteryExams.online is committed to providing free, high-quality education to all. Whether you are preparing for the Village Extension Officer (VEO), LDC, Fireman, or KAS exams, our structured content and rigorous testing methodology will give you the edge you need. Start your journey to a government job today with Mastery Exams.</p>
        </div>

    </main>

    <aside id="sidebar-container">
        
        <div class="jobiki-box">
            <div class="widget-title"><h3>Join Our Groups</h3></div>
            <ul class="social-filter">
                <li><a href="#" class="whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
                <li><a href="#" class="telegram"><i class="fab fa-telegram-plane"></i> Telegram</a></li>
                <li><a href="#" class="facebook"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                <li><a href="#" class="youtube"><i class="fab fa-youtube"></i> YouTube</a></li>
            </ul>
        </div>

        <div class="jobiki-box">
            <div class="widget-title"><h3>Categories</h3></div>
            <div class="category-tags">
                <a href="#">Mock Test</a>
                <a href="#">Current Affairs</a>
                <a href="#">Kerala History</a>
                <a href="#">Indian Constitution</a>
                <a href="#">General Science</a>
                <a href="#">Maths</a>
                <a href="#">English Grammar</a>
                <a href="#">Malayalam</a>
                <a href="#">Job News</a>
                <a href="#">SCERT Textbooks</a>
            </div>
        </div>

        <div class="jobiki-box">
            <div class="widget-title"><h3>Weekly Special</h3></div>
            <div class="booklet-card" style="border:none; padding:0;">
                <div class="booklet-thumb" style="width:60px; height:60px; font-size:20px;">üìú</div>
                <div class="booklet-info">
                    <h2><a href="#">Kerala Renaissance Full History Note</a></h2>
                    <div class="booklet-meta">Aug 2025</div>
                </div>
            </div>
            <div class="booklet-card" style="border:none; padding:0; margin-top:15px;">
                <div class="booklet-thumb" style="width:60px; height:60px; font-size:20px;">‚öñÔ∏è</div>
                <div class="booklet-info">
                    <h2><a href="#">Indian Constitution Articles List</a></h2>
                    <div class="booklet-meta">July 2025</div>
                </div>
            </div>
        </div>

        <div class="jobiki-box" style="text-align:center; min-height:300px; display:flex; align-items:center; justify-content:center; border:2px dashed #ddd; color:#aaa;">
            Sidebar Ad Space
        </div>

    </aside>

</div>

<footer>
    <div class="container">
        <div class="footer-cols">
            <div class="footer-col">
                <h3>About Mastery Exams</h3>
                <p>Mastery Exams provides free Notes for Central and State Competitive Exams. You can read job alerts from different departments like KPSC, SSC, Railway, Banks, UPSC, POLICE, and any other institutions.</p>
            </div>
            <div class="footer-col">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="practice.html">Mock Test</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Contact</h3>
                <ul>
                    <li>Email: contact@masteryexams.online</li>
                    <li>Location: Kerala, India</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="copyright">
        All Right Reserved Copyright ¬© 2025 Mastery Exams
    </div>
</footer>

<script>
    // --- VARIABLES ---
    let activeBookletCode = null;
    let currentLevel = 0;
    let maxLevel = 0;
    let currentQuestions = [];
    let qIndex = 0;
    let score = 0;

    // --- INITIALIZATION ---
    document.addEventListener("DOMContentLoaded", function() {
        if(typeof db !== 'undefined') {
            loadBooklets();
        } else {
            document.getElementById('booklet-list-container').innerHTML = "<p style='color:red;'>Error: data.js not found.</p>";
        }
    });

    // --- VIEW: BOOKLETS ---
    function loadBooklets() {
        document.getElementById('view-booklets').style.display = 'block';
        document.getElementById('view-levels').style.display = 'none';
        document.getElementById('view-exam').style.display = 'none';
        document.getElementById('view-result').style.display = 'none';

        const container = document.getElementById('booklet-list-container');
        container.innerHTML = "";

        for (const [code, info] of Object.entries(db)) {
            const count = info.data ? info.data.length : 0;
            const html = `
            <div class="booklet-card" onclick="openBooklet('${code}')">
                <div class="booklet-thumb">
                    <i class="fas fa-book"></i>
                </div>
                <div class="booklet-info">
                    <h2 class="entry-title">${info.title}</h2>
                    <div class="booklet-meta">${info.category || 'General'} ‚Ä¢ ${count} Questions</div>
                    <span class="start-btn">Start Practice</span>
                </div>
            </div>`;
            container.innerHTML += html;
        }
    }

    // --- VIEW: LEVELS ---
    function openBooklet(code) {
        activeBookletCode = code;
        const booklet = db[code];
        
        // Logic for Chunks (10 Qs per level)
        const totalQ = booklet.data.length;
        const chunks = [];
        const chunkSize = 10;
        
        // Generate chunk indices if not exists in LS
        const chunkKey = `chunks_${code}`;
        let storedChunks = JSON.parse(localStorage.getItem(chunkKey));
        
        if (!storedChunks) {
            // Create randomized chunks
            let indices = Array.from({length: totalQ}, (_, i) => i);
            indices.sort(() => Math.random() - 0.5); // Shuffle
            
            for (let i = 0; i < indices.length; i += chunkSize) {
                chunks.push(indices.slice(i, i + chunkSize));
            }
            localStorage.setItem(chunkKey, JSON.stringify(chunks));
            storedChunks = chunks;
        }

        // Get Progress
        const progressKey = `progress_${code}`;
        maxLevel = parseInt(localStorage.getItem(progressKey) || "0");

        // Render Grid
        document.getElementById('view-booklets').style.display = 'none';
        document.getElementById('view-levels').style.display = 'block';
        
        document.getElementById('level-page-title').innerText = booklet.title;
        const grid = document.getElementById('level-grid-container');
        grid.innerHTML = "";

        storedChunks.forEach((chunk, index) => {
            const div = document.createElement('div');
            div.className = "level-box";
            div.innerText = index + 1;

            if (index < maxLevel) {
                div.classList.add('passed');
                div.innerHTML += '<br><i class="fas fa-check" style="font-size:10px;"></i>';
                div.onclick = () => startLevel(index);
            } else if (index === maxLevel) {
                div.classList.add('active');
                div.onclick = () => startLevel(index);
            } else {
                div.classList.add('locked');
                div.innerHTML += '<br><i class="fas fa-lock" style="font-size:10px;"></i>';
            }
            grid.appendChild(div);
        });
    }

    function showBooklets() {
        loadBooklets();
    }

    // --- VIEW: EXAM ---
    function startLevel(levelIndex) {
        currentLevel = levelIndex;
        const chunkKey = `chunks_${activeBookletCode}`;
        const allChunks = JSON.parse(localStorage.getItem(chunkKey));
        const questionIndices = allChunks[levelIndex];
        
        // Retrieve Questions
        currentQuestions = questionIndices.map(i => db[activeBookletCode].data[i]);
        
        // Setup UI
        qIndex = 0;
        score = 0;
        document.getElementById('view-levels').style.display = 'none';
        document.getElementById('view-exam').style.display = 'block';
        document.getElementById('exam-title-text').innerText = `Level ${levelIndex + 1}`;
        
        loadQuestion();
    }

    function loadQuestion() {
        const q = currentQuestions[qIndex];
        document.getElementById('q-text').innerText = `${qIndex + 1}. ${q.q}`;
        document.getElementById('score-text').innerText = `${score}/${currentQuestions.length}`;
        
        // Progress Bar
        const pct = ((qIndex) / currentQuestions.length) * 100;
        document.getElementById('progress-fill').style.width = pct + "%";

        const optContainer = document.getElementById('options-container');
        optContainer.innerHTML = "";
        document.getElementById('next-btn').style.display = 'none';

        // Shuffle Options (Visual only, logic needs correct mapping)
        // Simple logic: We check against q.a (Answer String)
        
        q.o.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt, q.a);
            optContainer.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct) {
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => b.disabled = true);

        if (selected === correct) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('incorrect');
            // Highlight correct one
            buttons.forEach(b => {
                if(b.innerText === correct) b.classList.add('correct');
            });
        }
        
        document.getElementById('score-text').innerText = `${score}/${currentQuestions.length}`;
        document.getElementById('next-btn').style.display = 'inline-block';
    }

    function nextQuestion() {
        qIndex++;
        if (qIndex < currentQuestions.length) {
            loadQuestion();
        } else {
            finishExam();
        }
    }

    function finishExam() {
        document.getElementById('view-exam').style.display = 'none';
        document.getElementById('view-result').style.display = 'block';
        
        const rTitle = document.getElementById('result-title');
        const rMsg = document.getElementById('result-msg');
        const rIcon = document.getElementById('result-icon');

        if (score === currentQuestions.length) {
            // Passed
            rIcon.innerText = "üèÜ";
            rTitle.innerText = "Level Cleared!";
            rTitle.style.color = "#38b2ac";
            rMsg.innerText = "You scored 100%. You are a Master!";
            
            // Update Progress
            if (currentLevel === maxLevel) {
                maxLevel++;
                localStorage.setItem(`progress_${activeBookletCode}`, maxLevel);
            }
        } else {
            // Failed
            rIcon.innerText = "‚ö†Ô∏è";
            rTitle.innerText = "Level Failed";
            rTitle.style.color = "#e53e3e";
            rMsg.innerText = `You scored ${score}/${currentQuestions.length}. You need 100% to pass.`;
        }
    }

    function backToLevels() {
        document.getElementById('view-result').style.display = 'none';
        openBooklet(activeBookletCode); // Reload grid
    }

    function reportQuestion() {
        alert("Question reported to Admin.");
    }
</script>

</body>
</html>
